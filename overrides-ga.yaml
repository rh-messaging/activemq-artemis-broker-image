#See https://docs.cekit.io/en/latest/descriptor/overrides.html
name: &name "amq-broker-7/amq-broker-712-rhel8"
description: "Red Hat AMQ Broker 7.12.0 container image"
version: &version "7.12.0"
from: "registry-proxy.engineering.redhat.com/rh-osbs/ubi8-openjdk-17@sha256:0d12c4097e098b62f78a7a31c0d711d78e1e5a53f4c007b9a5fc6cc6ab4dc018"
labels:
  - name: "com.redhat.component"
    value: "amq-broker-rhel8-container"
  - name: "io.k8s.display-name"
    value: "Red Hat AMQ Broker 7.12.0 Base"
  - name: "io.openshift.tags"
    value: "messaging,amq,java,jboss,xpaas,base"
  - name: "org.jboss.product"
    value: "amq"
  - name: "org.jboss.product.version"
    value: "7.12.0"
  - name: "org.jboss.product.amq.version"
    value: "7.12.0"
envs:
  - name: "JBOSS_PRODUCT"
    value: "AMQ"
  - name: "JBOSS_IMAGE_NAME"
    value: *name
  - name: "JBOSS_IMAGE_VERSION"
    value: *version
  - name: "JBOSS_AMQ_VERSION"
    value: "7.12.0"
  - name: "PRODUCT_VERSION"
    value: "7.12.0"
  - name: "APACHE_ARTEMIS_VERSION"
    value: "2.32.0.temporary-redhat-00092"
artifacts:
  - name: apache-artemis-bin
    target: apache-artemis-bin.zip
    url: http://download.lab.bos.redhat.com/rcm-guest/staging/amq/scratch/amq-broker-7.12.0.SR1/amq-broker-7.12.0.SR1-bin.zip
    md5: 8b0e10f6402437f5d8dacc8362641fb4
    source-url: http://download.lab.bos.redhat.com/rcm-guest/staging/amq/scratch/amq-broker-7.12.0.SR1/amq-broker-7.12.0.SR1-src.zip
    source-md5: 232ace5521eb8fa0c2bd81df96c296e7
modules:
  repositories:
    - name: cct_module
      git:
        url: https://github.com/artemiscloud/cct_module.git
        ref: 0.38.0-amq
packages:
  content_sets:
    x86_64:
      - rhel-8-for-x86_64-baseos-rpms
      - rhel-8-for-x86_64-appstream-rpms
    s390x:
      - rhel-8-for-s390x-baseos-rpms
      - rhel-8-for-s390x-appstream-rpms
    ppc64le:
      - rhel-8-for-ppc64le-baseos-rpms
      - rhel-8-for-ppc64le-appstream-rpms
    aarch64:
      - rhel-8-for-aarch64-baseos-rpms
      - rhel-8-for-aarch64-appstream-rpms
osbs:
  configuration:
    container: #See https://osbs.readthedocs.io/en/latest/users.html#image-configuration
      compose:
        inherit: true
        signing_intent: release
        pulp_repos: true
      platforms:
        only:
          - x86_64
          - s390x
          - ppc64le
          - aarch64
      image_build_method: imagebuilder
      tags:
        - "7.12.0.CON.1.SR1"
        - "7.12.0.CON.1"
        - "7.12.0"
  repository:
    name: containers/amq-broker
    branch: amq-broker-7.12-rhel-8
